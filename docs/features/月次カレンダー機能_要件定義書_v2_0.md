# æœˆæ¬¡ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ©Ÿèƒ½ è¦ä»¶å®šç¾©æ›¸ v2.0

**ä½œæˆæ—¥**: 2025-11-14  
**æ›´æ–°æ—¥**: 2025-11-15ï¼ˆv2.0: ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–å¯¾å¿œç‰ˆï¼‰  
**å¯¾è±¡ã‚·ã‚¹ãƒ†ãƒ **: Trading Complete  
**å®Ÿè£…äºˆå®š**: v2.1  
**å„ªå…ˆåº¦**: HIGHï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ä¾¡å€¤ãŒé«˜ã„ï¼‰  
**å®Ÿè£…æ–¹é‡**: MODULES.mdæº–æ‹ ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–å®Ÿè£…

---

## ğŸ“‹ v2.0ã®ä¸»ãªå¤‰æ›´ç‚¹

| é …ç›® | v1.5ï¼ˆæ—§ï¼‰ | v2.0ï¼ˆæ–°ï¼‰ |
|------|-----------|-----------|
| **å®Ÿè£…æ–¹å¼** | script.jså†…ã«ç›´æ¥å®Ÿè£… | MonthlyCalendarModule.jsã§ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ– |
| **EventBus** | ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆå°†æ¥çš„ã«ï¼‰ | å¿…é ˆï¼ˆåˆå›ã‹ã‚‰çµ±åˆï¼‰ |
| **HTMLç”Ÿæˆ** | displayExpenseTabå†…ã«å…¨è¨˜è¿° | displayExpenseTabã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ã¿ã€ãƒ­ã‚¸ãƒƒã‚¯ã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« |
| **ä¿å®ˆæ€§** | ä½ï¼ˆscript.jsè‚¥å¤§åŒ–ï¼‰ | é«˜ï¼ˆç‹¬ç«‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼‰ |
| **MODULES.mdæº–æ‹ ** | éæº–æ‹  | å®Œå…¨æº–æ‹  |

---

## ğŸ“‹ ç›®æ¬¡

1. [æ¦‚è¦](#æ¦‚è¦)
2. [UIè¨­è¨ˆ](#uiè¨­è¨ˆ)
3. [æ©Ÿèƒ½ä»•æ§˜](#æ©Ÿèƒ½ä»•æ§˜)
4. [ãƒ‡ãƒ¼ã‚¿æ§‹é€ ](#ãƒ‡ãƒ¼ã‚¿æ§‹é€ )
5. [ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­è¨ˆï¼ˆMODULES.mdæº–æ‹ ï¼‰](#ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­è¨ˆmodules-mdæº–æ‹ )
6. [å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—](#å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—)
7. [æŠ€è¡“ä»•æ§˜](#æŠ€è¡“ä»•æ§˜)
8. [ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹](#ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹)
9. [æ³¨æ„äº‹é …ãƒ»åˆ¶ç´„](#æ³¨æ„äº‹é …åˆ¶ç´„)
10. [ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã®ä¿è¨¼](#ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã®ä¿è¨¼)
11. [å°†æ¥ã®æ‹¡å¼µæ¡ˆ](#å°†æ¥ã®æ‹¡å¼µæ¡ˆ)
12. [æ‰¿èªãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼](#æ‰¿èªãƒ¬ãƒ“ãƒ¥ãƒ¼)
13. [å‚è€ƒè³‡æ–™](#å‚è€ƒè³‡æ–™)

---

## 1. æ¦‚è¦

### 1-1. æ©Ÿèƒ½ã®ç›®çš„

æ—¥ã€…ã®ãƒˆãƒ¬ãƒ¼ãƒ‰æç›Šã‚’**ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼å½¢å¼ã§è¦–è¦šçš„ã«è¡¨ç¤º**ã—ã€æœˆæ¬¡ã®æˆç¸¾ã‚’ä¸€ç›®ã§æŠŠæ¡ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚

### 1-2. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒªãƒƒãƒˆ

| ãƒ¡ãƒªãƒƒãƒˆ | èª¬æ˜ |
|---------|------|
| **è¦–è¦šçš„ãªæŠŠæ¡** | æœˆå…¨ä½“ã®æˆç¸¾ã‚’ä¸€ç›®ã§ç¢ºèªã§ãã‚‹ |
| **æ—¥æ¬¡ã®ãƒªã‚ºãƒ æŠŠæ¡** | æ›œæ—¥ã”ã¨ã®å‚¾å‘ï¼ˆä¾‹ï¼šæ°´æ›œæ—¥ã¯èª¿å­ãŒæ‚ªã„ï¼‰ãŒåˆ†ã‹ã‚‹ |
| **æ„Ÿæƒ…ç®¡ç†** | é€£æ•—ã®çŠ¶æ³ã‚’è¦–è¦šçš„ã«èªè­˜ã—ã€ãƒ¡ãƒ³ã‚¿ãƒ«ç®¡ç†ã«æ´»ç”¨ |
| **æŒ¯ã‚Šè¿”ã‚ŠåŠ¹ç‡åŒ–** | ç‰¹å®šã®æ—¥ã«ã‚¸ãƒ£ãƒ³ãƒ—ã—ã‚„ã™ã„ |
| **ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³** | ç·‘è‰²ï¼ˆãƒ—ãƒ©ã‚¹ï¼‰ãŒå¢—ãˆã¦ã„ãé”æˆæ„Ÿ |

### 1-3. é…ç½®å ´æ‰€

```
ğŸ’° åæ”¯ç®¡ç†ã‚¿ãƒ– > ğŸ“… æœˆæ¬¡ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ï¼ˆ1ç•ªç›®ã®ã‚¿ãƒ–ï¼‰
```

**ç†ç”±**:
- æ¯æ—¥ä½¿ã†æ©Ÿèƒ½ãªã®ã§ã€æœ€åˆã®ã‚¿ãƒ–ã«é…ç½®
- åæ”¯ç®¡ç†ã‚¿ãƒ–ã®ä½¿ç”¨é »åº¦ã‚’å¤§å¹…ã«å‘ä¸Š
- ã€Œå®Ÿå‹™çš„ãªç¢ºèªã€ã®å½¹å‰²ã«æœ€é©

---

## 2. UIè¨­è¨ˆ

### 2-1. å…¨ä½“ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’° åæ”¯ç®¡ç†ã‚¿ãƒ–                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š 2025å¹´ åæ”¯ã‚µãƒãƒªãƒ¼ï¼ˆæœ€ä¸Šéƒ¨ãƒ»å¸¸æ™‚è¡¨ç¤ºï¼‰                â”‚
â”‚ ç·æç›Š: +1,234,567å†† | å‹ç‡: 68% | çµŒè²»: -234,567å††      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ“…æœˆæ¬¡ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼][ğŸ“çµŒè²»å…¥åŠ›][ğŸ“‹çµŒè²»ä¸€è¦§]... â† ã‚¿ãƒ–åˆ‡æ›¿  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  ã€æœˆæ¬¡ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤ºã‚¨ãƒªã‚¢ã€‘                            â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ [2025å¹´â–¼] [â—€å‰æœˆ] 2æœˆ [æ¬¡æœˆâ–¶] [ğŸ“…ä»Šæœˆ]       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  æ—¥   æœˆ   ç«   æ°´   æœ¨   é‡‘   åœŸ                 â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚      1     2     3     4     5     6            â”‚    â”‚
â”‚  â”‚      -16k -89k +31k +67k +66k                   â”‚    â”‚
â”‚  â”‚  7     8     9    10    11    12    13          â”‚    â”‚
â”‚  â”‚ -38k +16k +58k -82k -70k +86k -46k             â”‚    â”‚
â”‚  â”‚ 14    15    16    17    18    19    20          â”‚    â”‚
â”‚  â”‚ +79k +60k +38k +3k  -62k +52k -12k             â”‚    â”‚
â”‚  â”‚ 21    22    23    24    25    26    27          â”‚    â”‚
â”‚  â”‚ +98k +22k -96k +54k +20k +36k                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚         ä»Šæœˆã®æç›Š: +337,000å††                   â”‚    â”‚
â”‚  â”‚    ï¼ˆæ±ºæ¸ˆæ¸ˆã¿ãƒˆãƒ¬ãƒ¼ãƒ‰: 25ä»¶ï¼‰                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2-2. ã‚¿ãƒ–æ§‹é€ ï¼ˆæ—¢å­˜ã®expense-tabsãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ç”¨ï¼‰

```html
<div class="expense-tabs" style="...">
    <button onclick="showExpenseSection('calendar')" id="expense-tab-calendar" class="expense-tab-btn" 
        style="padding: 10px 20px; background: none; border: none; cursor: pointer; border-bottom: 3px solid #007bff; font-weight: bold;">
        ğŸ“… æœˆæ¬¡ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼
    </button>
    <!-- ä»–ã®ã‚¿ãƒ–ãƒœã‚¿ãƒ³ -->
</div>
```

### 2-3. ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³æ§‹é€ 

```html
<div id="expense-section-calendar" class="expense-section" style="display: block;">
    <h3>ğŸ“… æœˆæ¬¡ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</h3>
    
    <!-- ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« -->
    <div class="calendar-controls">
        <!-- å¹´é¸æŠãƒ»æœˆç§»å‹•ãƒ»ä»Šæœˆãƒœã‚¿ãƒ³ -->
    </div>
    
    <!-- ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚°ãƒªãƒƒãƒ‰ -->
    <div id="calendarGrid" class="calendar-grid">
        <!-- MonthlyCalendarModuleã§å‹•çš„ç”Ÿæˆ -->
    </div>
    
    <!-- æœˆé–“ã‚µãƒãƒªãƒ¼ -->
    <div id="monthSummary" class="month-summary">
        <!-- MonthlyCalendarModuleã§å‹•çš„ç”Ÿæˆ -->
    </div>
    
    <!-- ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ— -->
    <div id="dayTooltip" class="day-tooltip" style="display: none;"></div>
</div>
```

---

## 3. æ©Ÿèƒ½ä»•æ§˜

### 3-1. ãƒ‡ãƒ¼ã‚¿å–å¾—

#### å¯¾è±¡ãƒ‡ãƒ¼ã‚¿

```javascript
// TradeManagerã‹ã‚‰æ±ºæ¸ˆæ¸ˆã¿ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚’å–å¾—
const trades = window.TradeManager.getInstance().getAllTrades();
const settledTrades = trades.filter(trade => trade.exits && trade.exits.length > 0);
```

#### æ—¥ä»˜ã®æ±ºå®š

**æ±ºæ¸ˆæ—¥åŸºæº–**:
- ã‚¨ãƒ³ãƒˆãƒªãƒ¼æ—¥ã§ã¯ãªãã€**æ±ºæ¸ˆæ—¥ï¼ˆæœ€çµ‚æ±ºæ¸ˆæ—¥ï¼‰**ã§é›†è¨ˆ
- ç†ç”±ï¼šå®Ÿéš›ã«æç›ŠãŒç¢ºå®šã—ãŸæ—¥ã§è¡¨ç¤ºã™ã‚‹æ–¹ãŒå®Ÿç”¨çš„

```javascript
// æœ€çµ‚æ±ºæ¸ˆæ—¥ã®å–å¾—
const exitDate = trade.exits[trade.exits.length - 1].time;
const dateKey = exitDate.split('T')[0]; // "2025-02-01"
```

### 3-2. æ—¥åˆ¥æç›Šã®é›†è¨ˆ

```javascript
// MonthlyCalendarModuleå†…ã§å®Ÿè£…
const dailyProfits = {
    "2025-02-01": { total: -16000, count: 3 },
    "2025-02-02": { total: -89000, count: 5 },
    // ...
};
```

**ä½¿ç”¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**: `trade.yenProfitLoss.netProfit`ï¼ˆMODULES.mdæº–æ‹ ï¼‰

---

## 4. ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

### 4-1. ãƒˆãƒ¬ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ï¼ˆMODULES.mdæº–æ‹ ï¼‰

```javascript
trade.yenProfitLoss = {
    profitLoss: 35000,    // æç›Šï¼ˆå††ï¼‰
    swap: -171,           // ã‚¹ãƒ¯ãƒƒãƒ—ï¼ˆå††ï¼‰
    commission: -75,      // æ‰‹æ•°æ–™ï¼ˆå††ï¼‰
    netProfit: 34754      // â˜…ç´”æç›Šï¼ˆå††ï¼‰â† ã“ã‚Œã‚’ä½¿ç”¨
}
```

### 4-2. æ—¥åˆ¥é›†è¨ˆãƒ‡ãƒ¼ã‚¿

```javascript
dailyProfits[dateKey] = {
    total: Number,   // æ—¥æ¬¡åˆè¨ˆæç›Šï¼ˆå††ï¼‰
    count: Number    // æ±ºæ¸ˆãƒˆãƒ¬ãƒ¼ãƒ‰æ•°
}
```

### 4-3. LocalStorageï¼ˆä¸è¦ï¼‰

**æœˆæ¬¡ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã¯è¨ˆç®—çµæœã‚’ä¿å­˜ã—ãªã„**:
- æ¯å›TradeManagerã‹ã‚‰æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦è¨ˆç®—
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§æœ€æ–°ã®çŠ¶æ…‹ã‚’åæ˜ 
- LocalStorageã¸ã®ä¿å­˜ã¯ä¸è¦

---

## 5. ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­è¨ˆï¼ˆMODULES.mdæº–æ‹ ï¼‰

### 5-1. MonthlyCalendarModule.js

**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `js/part7_modules/MonthlyCalendarModule.js`

#### ã‚¯ãƒ©ã‚¹æ§‹é€ 

```javascript
/**
 * MonthlyCalendarModule - æœˆæ¬¡ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤ºæ©Ÿèƒ½
 * @description MODULES.mdæº–æ‹ ã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
 * @author ã‚³ãƒ³ãƒ‘ãƒŠ / Claude
 * @version 1.0.0
 */
class MonthlyCalendarModule {
    // ========== Private Fields ==========
    #currentYear = null;
    #currentMonth = null;
    #eventBus = null;
    #tradeManager = null;
    #initialized = false;
    
    constructor() {
        this.#eventBus = window.eventBus;
        this.#tradeManager = window.TradeManager?.getInstance();
        this.#currentYear = new Date().getFullYear();
        this.#currentMonth = new Date().getMonth() + 1;
        
        console.log('MonthlyCalendarModule: åˆæœŸåŒ–é–‹å§‹');
    }
    
    // ========== Public API ==========
    
    /**
     * ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼åˆæœŸåŒ–
     * @public
     */
    initialize() {
        this.#generateYearOptions();
        this.updateCalendar();
        this.#setupEventListeners();
        this.#initialized = true;
    }
    
    /**
     * ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ›´æ–°
     * @public
     */
    updateCalendar() {
        const yearSelect = document.getElementById('calendarYear');
        if (yearSelect) {
            this.#currentYear = parseInt(yearSelect.value);
        }
        
        this.#generateCalendar(this.#currentYear, this.#currentMonth);
        this.#updateMonthSummary(this.#currentYear, this.#currentMonth);
    }
    
    /**
     * å‰æœˆã¸ç§»å‹•
     * @public
     */
    previousMonth() {
        this.#currentMonth--;
        if (this.#currentMonth < 1) {
            this.#currentMonth = 12;
            this.#currentYear--;
            this.#updateYearSelect();
        }
        this.updateCalendar();
        this.#emitEvent('calendar:monthChanged');
    }
    
    /**
     * æ¬¡æœˆã¸ç§»å‹•
     * @public
     */
    nextMonth() {
        this.#currentMonth++;
        if (this.#currentMonth > 12) {
            this.#currentMonth = 1;
            this.#currentYear++;
            this.#updateYearSelect();
        }
        this.updateCalendar();
        this.#emitEvent('calendar:monthChanged');
    }
    
    /**
     * ä»Šæœˆã«æˆ»ã‚‹
     * @public
     */
    goToCurrentMonth() {
        const today = new Date();
        this.#currentYear = today.getFullYear();
        this.#currentMonth = today.getMonth() + 1;
        this.#updateYearSelect();
        this.updateCalendar();
        this.#emitEvent('calendar:monthChanged');
    }
    
    /**
     * ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—è¡¨ç¤º
     * @public
     * @param {Event} event - ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
     * @param {string} date - æ—¥ä»˜ï¼ˆYYYY-MM-DDï¼‰
     * @param {number} profit - æç›Š
     * @param {number} count - ãƒˆãƒ¬ãƒ¼ãƒ‰æ•°
     */
    showDayTooltip(event, date, profit, count) {
        this.#displayTooltip(event, date, profit, count);
    }
    
    /**
     * ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—éè¡¨ç¤º
     * @public
     */
    hideDayTooltip() {
        const tooltip = document.getElementById('dayTooltip');
        if (tooltip) {
            tooltip.style.display = 'none';
        }
    }
    
    /**
     * ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«çŠ¶æ…‹å–å¾—ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
     * @public
     * @returns {Object}
     */
    getStatus() {
        return {
            initialized: this.#initialized,
            currentYear: this.#currentYear,
            currentMonth: this.#currentMonth,
            hasEventBus: !!this.#eventBus,
            hasTradeManager: !!this.#tradeManager
        };
    }
    
    // ========== Private Methods ==========
    
    /**
     * å¹´é¸æŠè‚¢ã‚’ç”Ÿæˆ
     * @private
     */
    #generateYearOptions() {
        const yearSelect = document.getElementById('calendarYear');
        if (!yearSelect) return;
        
        const currentYear = new Date().getFullYear();
        const startYear = 2020;
        const endYear = currentYear + 1;
        
        let options = '';
        for (let year = startYear; year <= endYear; year++) {
            const selected = year === this.#currentYear ? 'selected' : '';
            options += `<option value="${year}" ${selected}>${year}å¹´</option>`;
        }
        
        yearSelect.innerHTML = options;
    }
    
    /**
     * ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç”Ÿæˆ
     * @private
     * @param {number} year - å¹´
     * @param {number} month - æœˆ
     */
    #generateCalendar(year, month) {
        const calendarGrid = document.getElementById('calendarGrid');
        const monthDisplay = document.getElementById('calendarMonth');
        
        if (!calendarGrid || !monthDisplay) return;
        
        monthDisplay.textContent = `${month}æœˆ`;
        
        const dailyProfits = this.#calculateDailyProfits(year, month);
        const html = this.#buildCalendarHTML(year, month, dailyProfits);
        
        calendarGrid.innerHTML = html;
    }
    
    /**
     * æ—¥åˆ¥æç›Šã‚’è¨ˆç®—
     * @private
     * @param {number} year - å¹´
     * @param {number} month - æœˆ
     * @returns {Object} æ—¥åˆ¥æç›Šãƒ‡ãƒ¼ã‚¿
     */
    #calculateDailyProfits(year, month) {
        const dailyProfits = {};
        
        if (!this.#tradeManager) return dailyProfits;
        
        const trades = this.#tradeManager.getAllTrades();
        
        trades.forEach(trade => {
            if (!trade.exits || trade.exits.length === 0) return;
            
            const lastExit = trade.exits[trade.exits.length - 1];
            const exitDate = lastExit.time.split('T')[0];
            const exitYear = parseInt(exitDate.split('-')[0]);
            const exitMonth = parseInt(exitDate.split('-')[1]);
            
            if (exitYear !== year || exitMonth !== month) return;
            
            const profit = trade.yenProfitLoss?.netProfit || 0;
            
            if (!dailyProfits[exitDate]) {
                dailyProfits[exitDate] = { total: 0, count: 0 };
            }
            
            dailyProfits[exitDate].total += profit;
            dailyProfits[exitDate].count++;
        });
        
        return dailyProfits;
    }
    
    /**
     * ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼HTMLã‚’æ§‹ç¯‰
     * @private
     * @param {number} year - å¹´
     * @param {number} month - æœˆ
     * @param {Object} dailyProfits - æ—¥åˆ¥æç›Šãƒ‡ãƒ¼ã‚¿
     * @returns {string} HTMLæ–‡å­—åˆ—
     */
    #buildCalendarHTML(year, month, dailyProfits) {
        let html = '';
        
        // æ›œæ—¥ãƒ˜ãƒƒãƒ€ãƒ¼
        const weekdays = ['æ—¥', 'æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ'];
        weekdays.forEach(day => {
            html += `<div class="calendar-header">${day}</div>`;
        });
        
        // æ—¥ä»˜ã‚»ãƒ«
        const firstDay = new Date(year, month - 1, 1);
        const lastDay = new Date(year, month, 0);
        const daysInMonth = lastDay.getDate();
        const startDayOfWeek = firstDay.getDay();
        
        const today = new Date();
        const isCurrentMonth = today.getFullYear() === year && today.getMonth() + 1 === month;
        const currentDay = today.getDate();
        
        // ç©ºã‚»ãƒ«
        for (let i = 0; i < startDayOfWeek; i++) {
            html += `<div class="calendar-day empty"></div>`;
        }
        
        // æ—¥ä»˜ã‚»ãƒ«
        for (let day = 1; day <= daysInMonth; day++) {
            const dateKey = `${year}-${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
            const dayData = dailyProfits[dateKey];
            
            html += this.#buildDayCellHTML(day, dateKey, dayData, isCurrentMonth, currentDay);
        }
        
        return html;
    }
    
    /**
     * æ—¥ä»˜ã‚»ãƒ«HTMLã‚’æ§‹ç¯‰
     * @private
     */
    #buildDayCellHTML(day, dateKey, dayData, isCurrentMonth, currentDay) {
        let cellClass = 'calendar-day';
        let profitHtml = '';
        
        if (dayData) {
            const profit = dayData.total;
            const count = dayData.count;
            
            if (profit > 0) {
                cellClass += ' positive';
                profitHtml = `<span class="day-profit positive">${this.#formatProfitK(profit)}</span>`;
            } else if (profit < 0) {
                cellClass += ' negative';
                profitHtml = `<span class="day-profit negative">${this.#formatProfitK(profit)}</span>`;
            } else {
                cellClass += ' zero';
                profitHtml = `<span class="day-profit zero">Â±0</span>`;
            }
            
            if (isCurrentMonth && day === currentDay) {
                cellClass += ' today';
            }
            
            return `
                <div class="${cellClass}" data-date="${dateKey}" 
                     onclick="window.MonthlyCalendarModule.showDayTooltip(event, '${dateKey}', ${profit}, ${count})">
                    <span class="day-number">${day}</span>
                    ${profitHtml}
                </div>
            `;
        } else {
            cellClass += ' no-trade';
            if (isCurrentMonth && day === currentDay) {
                cellClass += ' today';
            }
            
            return `
                <div class="${cellClass}">
                    <span class="day-number">${day}</span>
                </div>
            `;
        }
    }
    
    /**
     * æç›Šã‚’kè¡¨è¨˜ã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
     * @private
     * @param {number} profit - æç›Š
     * @returns {string} ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ¸ˆã¿æ–‡å­—åˆ—
     */
    #formatProfitK(profit) {
        if (profit === 0) return 'Â±0';
        
        const absProfit = Math.abs(profit);
        const sign = profit >= 0 ? '+' : '-';
        
        if (absProfit >= 1000000) {
            return `${sign}${(absProfit / 1000000).toFixed(1)}M`;
        } else if (absProfit >= 1000) {
            return `${sign}${Math.round(absProfit / 1000)}k`;
        } else {
            return `${sign}${absProfit}`;
        }
    }
    
    /**
     * å††è¡¨è¨˜ã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
     * @private
     * @param {number} amount - é‡‘é¡
     * @returns {string} ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ¸ˆã¿æ–‡å­—åˆ—
     */
    #formatYen(amount) {
        const sign = amount >= 0 ? '+' : '';
        return sign + amount.toLocaleString() + 'å††';
    }
    
    /**
     * æœˆé–“ã‚µãƒãƒªãƒ¼ã‚’æ›´æ–°
     * @private
     * @param {number} year - å¹´
     * @param {number} month - æœˆ
     */
    #updateMonthSummary(year, month) {
        const dailyProfits = this.#calculateDailyProfits(year, month);
        
        let totalProfit = 0;
        let totalCount = 0;
        
        Object.values(dailyProfits).forEach(dayData => {
            totalProfit += dayData.total;
            totalCount += dayData.count;
        });
        
        const profitElement = document.getElementById('monthTotalProfit');
        const countElement = document.getElementById('monthTradeCount');
        
        if (profitElement) {
            profitElement.textContent = this.#formatYen(totalProfit);
            profitElement.className = 'summary-amount ' + (totalProfit >= 0 ? 'positive' : 'negative');
        }
        
        if (countElement) {
            countElement.textContent = `ï¼ˆæ±ºæ¸ˆæ¸ˆã¿ãƒˆãƒ¬ãƒ¼ãƒ‰: ${totalCount}ä»¶ï¼‰`;
        }
    }
    
    /**
     * ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—è¡¨ç¤º
     * @private
     */
    #displayTooltip(event, date, profit, count) {
        event.stopPropagation();
        
        const tooltip = document.getElementById('dayTooltip');
        if (!tooltip) return;
        
        const dateObj = new Date(date + 'T00:00:00');
        const weekdays = ['æ—¥', 'æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ'];
        const weekday = weekdays[dateObj.getDay()];
        const year = dateObj.getFullYear();
        const month = dateObj.getMonth() + 1;
        const day = dateObj.getDate();
        
        const profitClass = profit >= 0 ? 'positive' : 'negative';
        tooltip.innerHTML = `
            <div class="tooltip-date">${year}å¹´${month}æœˆ${day}æ—¥ï¼ˆ${weekday}ï¼‰</div>
            <div class="tooltip-amount ${profitClass}">${this.#formatYen(profit)}</div>
            <div class="tooltip-trades">ãƒˆãƒ¬ãƒ¼ãƒ‰æ•°: ${count}ä»¶</div>
        `;
        
        const rect = event.currentTarget.getBoundingClientRect();
        tooltip.style.left = rect.left + rect.width / 2 - 100 + 'px';
        tooltip.style.top = rect.bottom + 10 + 'px';
        tooltip.style.display = 'block';
    }
    
    /**
     * å¹´é¸æŠã‚’æ›´æ–°
     * @private
     */
    #updateYearSelect() {
        const yearSelect = document.getElementById('calendarYear');
        if (yearSelect) {
            yearSelect.value = this.#currentYear;
        }
    }
    
    /**
     * ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¨­å®š
     * @private
     */
    #setupEventListeners() {
        // ãƒšãƒ¼ã‚¸å…¨ä½“ã®ã‚¯ãƒªãƒƒã‚¯ã§ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã‚’é–‰ã˜ã‚‹
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.calendar-day')) {
                this.hideDayTooltip();
            }
        });
        
        // TradeManager ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç›£è¦–ï¼ˆå°†æ¥çš„ã«ï¼‰
        if (this.#eventBus) {
            this.#eventBus.on('trade:added', () => this.updateCalendar());
            this.#eventBus.on('trade:updated', () => this.updateCalendar());
            this.#eventBus.on('trade:deleted', () => this.updateCalendar());
        }
    }
    
    /**
     * ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«
     * @private
     * @param {string} eventName - ã‚¤ãƒ™ãƒ³ãƒˆå
     * @param {Object} data - ãƒ‡ãƒ¼ã‚¿
     */
    #emitEvent(eventName, data = {}) {
        if (this.#eventBus) {
            this.#eventBus.emit(eventName, {
                year: this.#currentYear,
                month: this.#currentMonth,
                ...data
            });
        }
    }
}

// ã‚°ãƒ­ãƒ¼ãƒãƒ«ç™»éŒ²
window.MonthlyCalendarModule = new MonthlyCalendarModule();
```

### 5-2. ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°ï¼ˆäº’æ›æ€§ç¶­æŒï¼‰

```javascript
// script.jså†…ã«é…ç½®ï¼ˆå¾Œæ–¹äº’æ›æ€§ã®ãŸã‚ï¼‰
function updateCalendar() {
    window.MonthlyCalendarModule?.updateCalendar();
}

function previousMonth() {
    window.MonthlyCalendarModule?.previousMonth();
}

function nextMonth() {
    window.MonthlyCalendarModule?.nextMonth();
}

function goToCurrentMonth() {
    window.MonthlyCalendarModule?.goToCurrentMonth();
}
```

### 5-3. displayExpenseTabé–¢æ•°ã®å½¹å‰²

**HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ã¿**ã‚’ç”Ÿæˆï¼š

```javascript
function displayExpenseTab() {
    // ... æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ ...
    
    expenseTab.innerHTML = `
        <!-- ã‚µãƒãƒªãƒ¼ -->
        
        <!-- ã‚¿ãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
        <div class="expense-tabs">
            <button onclick="showExpenseSection('calendar')" ...>ğŸ“… æœˆæ¬¡ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</button>
            <!-- ä»–ã®ã‚¿ãƒ– -->
        </div>
        
        <!-- æœˆæ¬¡ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div id="expense-section-calendar" class="expense-section" style="display: block;">
            <h3>ğŸ“… æœˆæ¬¡ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</h3>
            
            <!-- ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ï¼ˆHTMLã®ã¿ï¼‰ -->
            <div class="calendar-controls">...</div>
            
            <!-- ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚°ãƒªãƒƒãƒ‰ï¼ˆç©ºï¼‰ -->
            <div id="calendarGrid" class="calendar-grid"></div>
            
            <!-- æœˆé–“ã‚µãƒãƒªãƒ¼ï¼ˆç©ºï¼‰ -->
            <div id="monthSummary" class="month-summary">...</div>
            
            <!-- ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ— -->
            <div id="dayTooltip" class="day-tooltip" style="display: none;"></div>
        </div>
        
        <!-- ä»–ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    `;
}
```

### 5-4. showExpenseSectioné–¢æ•°ã®å½¹å‰²

```javascript
function showExpenseSection(section) {
    // ... æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ ...
    
    switch(section) {
        case 'calendar':
            // MonthlyCalendarModuleã‚’åˆæœŸåŒ–
            if (window.MonthlyCalendarModule) {
                window.MonthlyCalendarModule.initialize();
            }
            break;
        // ä»–ã®ã‚±ãƒ¼ã‚¹
    }
}
```

---

## 6. å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### 6-1. Phase 1: MonthlyCalendarModule.jsä½œæˆï¼ˆ3-4æ™‚é–“ï¼‰

#### Step 1-1: ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆãƒ»åŸºæœ¬æ§‹é€ ï¼ˆ1æ™‚é–“ï¼‰
- [ ] `js/part7_modules/MonthlyCalendarModule.js` ã‚’ä½œæˆ
- [ ] ã‚¯ãƒ©ã‚¹å®šç¾©ã€ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã€constructor
- [ ] Public API ã®ã‚¹ã‚±ãƒ«ãƒˆãƒ³
- [ ] ã‚°ãƒ­ãƒ¼ãƒãƒ«ç™»éŒ²ï¼ˆ`window.MonthlyCalendarModule`ï¼‰

#### Step 1-2: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯ï¼ˆ1.5æ™‚é–“ï¼‰
- [ ] `#generateCalendar()` å®Ÿè£…
- [ ] `#calculateDailyProfits()` å®Ÿè£…
- [ ] `#buildCalendarHTML()` å®Ÿè£…
- [ ] `#buildDayCellHTML()` å®Ÿè£…

#### Step 1-3: UIåˆ¶å¾¡ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆ1æ™‚é–“ï¼‰
- [ ] `previousMonth()`, `nextMonth()`, `goToCurrentMonth()` å®Ÿè£…
- [ ] `#updateMonthSummary()` å®Ÿè£…
- [ ] `showDayTooltip()`, `hideDayTooltip()` å®Ÿè£…
- [ ] `#formatProfitK()`, `#formatYen()` å®Ÿè£…

#### Step 1-4: EventBusçµ±åˆï¼ˆ30åˆ†ï¼‰
- [ ] `#setupEventListeners()` å®Ÿè£…
- [ ] `#emitEvent()` å®Ÿè£…
- [ ] trade ã‚¤ãƒ™ãƒ³ãƒˆç›£è¦–

---

### 6-2. Phase 2: script.jsä¿®æ­£ï¼ˆ1æ™‚é–“ï¼‰

#### Step 2-1: displayExpenseTabé–¢æ•°ä¿®æ­£ï¼ˆ30åˆ†ï¼‰
- [ ] ã‚¿ãƒ–ãƒœã‚¿ãƒ³ã«æœˆæ¬¡ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’è¿½åŠ 
- [ ] ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè¿½åŠ 
- [ ] æ—¢å­˜ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã® display ä¿®æ­£

#### Step 2-2: showExpenseSectioné–¢æ•°ä¿®æ­£ï¼ˆ15åˆ†ï¼‰
- [ ] `case 'calendar':` ã‚’è¿½åŠ 
- [ ] `MonthlyCalendarModule.initialize()` å‘¼ã³å‡ºã—

#### Step 2-3: ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°è¿½åŠ ï¼ˆ15åˆ†ï¼‰
- [ ] `updateCalendar()` äº’æ›é–¢æ•°
- [ ] `previousMonth()` äº’æ›é–¢æ•°
- [ ] `nextMonth()` äº’æ›é–¢æ•°
- [ ] `goToCurrentMonth()` äº’æ›é–¢æ•°

---

### 6-3. Phase 3: CSSè¿½åŠ ï¼ˆ1æ™‚é–“ï¼‰

#### Step 3-1: 5_expense.cssä¿®æ­£
- [ ] ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã®ã‚¹ã‚¿ã‚¤ãƒ«
- [ ] ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚°ãƒªãƒƒãƒ‰ã®ã‚¹ã‚¿ã‚¤ãƒ«
- [ ] ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã®ã‚¹ã‚¿ã‚¤ãƒ«
- [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ

---

### 6-4. Phase 4: index.htmlèª­ã¿è¾¼ã¿è¨­å®šï¼ˆ15åˆ†ï¼‰

#### Step 4-1: ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚¿ã‚°è¿½åŠ 
```html
<!-- Part 7ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« -->
<script src="js/part7_modules/MonthlyCalendarModule.js"></script>
```

**é‡è¦**: EventBus.jsã®**å¾Œ**ã€script.jsã®**å‰**ã«é…ç½®

---

### 6-5. Phase 5: çµ±åˆãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒãƒƒã‚°ï¼ˆ1-2æ™‚é–“ï¼‰

#### ãƒ†ã‚¹ãƒˆé …ç›®
- [ ] æ­£å¸¸ç³»ãƒ†ã‚¹ãƒˆï¼ˆ12é …ç›®ï¼‰
- [ ] ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆ6é …ç›®ï¼‰
- [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ†ã‚¹ãƒˆï¼ˆ3é …ç›®ï¼‰
- [ ] ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ç¢ºèª

---

### ç·æ‰€è¦æ™‚é–“

```
Phase 1: MonthlyCalendarModule.js    3-4æ™‚é–“
Phase 2: script.jsä¿®æ­£              1æ™‚é–“
Phase 3: CSSè¿½åŠ                     1æ™‚é–“
Phase 4: index.htmlä¿®æ­£             15åˆ†
Phase 5: çµ±åˆãƒ†ã‚¹ãƒˆ                 1-2æ™‚é–“
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
åˆè¨ˆ                                6-8.5æ™‚é–“
```

---

## 7. æŠ€è¡“ä»•æ§˜

### 7-1. ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
Trading Complete/
â”œâ”€â”€ index.html
â”‚   â””â”€â”€ MonthlyCalendarModule.jsã®èª­ã¿è¾¼ã¿ã‚¿ã‚°è¿½åŠ 
â”‚
â”œâ”€â”€ styles/
â”‚   â””â”€â”€ 5_expense.css
â”‚       â””â”€â”€ æœˆæ¬¡ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®ã‚¹ã‚¿ã‚¤ãƒ«è¿½åŠ 
â”‚
â””â”€â”€ js/
    â”œâ”€â”€ script.js
    â”‚   â”œâ”€â”€ displayExpenseTab()ä¿®æ­£
    â”‚   â”œâ”€â”€ showExpenseSection()ä¿®æ­£
    â”‚   â””â”€â”€ ã‚°ãƒ­ãƒ¼ãƒãƒ«äº’æ›é–¢æ•°è¿½åŠ 
    â”‚
    â””â”€â”€ part7_modules/
        â””â”€â”€ MonthlyCalendarModule.jsï¼ˆæ–°è¦ä½œæˆï¼‰
```

### 7-2. ä¾å­˜é–¢ä¿‚

```javascript
// å¿…é ˆã®ä¾å­˜é–¢ä¿‚
window.eventBus              // EventBusï¼ˆã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ï¼‰
window.TradeManager          // ãƒˆãƒ¬ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿å–å¾—
showExpenseSection()         // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ

// ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ä¾å­˜é–¢ä¿‚
window.switchTab()           // ä»–ã‚¿ãƒ–ã¸ã®é·ç§»ï¼ˆå°†æ¥çš„ã«ï¼‰
```

### 7-3. ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§

```
âœ… Chrome 90+
âœ… Firefox 88+
âœ… Safari 14+
âœ… Edge 90+
âŒ IE11ï¼ˆã‚µãƒãƒ¼ãƒˆå¯¾è±¡å¤–ï¼‰
```

---

## 8. ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹

### 8-1. æ­£å¸¸ç³»ãƒ†ã‚¹ãƒˆï¼ˆ12é …ç›®ï¼‰

| ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ | æœŸå¾…çµæœ | å„ªå…ˆåº¦ |
|------------|---------|--------|
| ç¾åœ¨æœˆã‚’è¡¨ç¤º | ä»Šæœˆã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹ | HIGH |
| å‰æœˆãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ | å‰æœˆã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«åˆ‡ã‚Šæ›¿ã‚ã‚‹ | HIGH |
| æ¬¡æœˆãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ | æ¬¡æœˆã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«åˆ‡ã‚Šæ›¿ã‚ã‚‹ | HIGH |
| 12æœˆâ†’1æœˆ | å¹´ãŒæ­£ã—ãæ›´æ–°ã•ã‚Œã‚‹ | HIGH |
| 1æœˆâ†’12æœˆ | å¹´ãŒæ­£ã—ãæ›´æ–°ã•ã‚Œã‚‹ | HIGH |
| å¹´ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³å¤‰æ›´ | é¸æŠã—ãŸå¹´ã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«åˆ‡ã‚Šæ›¿ã‚ã‚‹ | MEDIUM |
| ä»Šæœˆãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ | ç¾åœ¨æœˆã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«æˆ»ã‚‹ | MEDIUM |
| ãƒ—ãƒ©ã‚¹æç›Šã®æ—¥ | ç·‘è‰²ã§è¡¨ç¤ºã•ã‚Œã‚‹ | HIGH |
| ãƒã‚¤ãƒŠã‚¹æç›Šã®æ—¥ | èµ¤è‰²ã§è¡¨ç¤ºã•ã‚Œã‚‹ | HIGH |
| ãƒˆãƒ¬ãƒ¼ãƒ‰ãªã—ã®æ—¥ | æ—¥ä»˜ã®ã¿è¡¨ç¤ºã•ã‚Œã‚‹ | LOW |
| ä»Šæ—¥ã®æ—¥ä»˜ | ãƒã‚¤ãƒ©ã‚¤ãƒˆè¡¨ç¤ºã•ã‚Œã‚‹ | MEDIUM |
| æœˆé–“åˆè¨ˆ | æ­£ã—ã„é‡‘é¡ãŒè¡¨ç¤ºã•ã‚Œã‚‹ | HIGH |

### 8-2. ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆ6é …ç›®ï¼‰

| ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ | æœŸå¾…çµæœ | å„ªå…ˆåº¦ |
|------------|---------|--------|
| ãƒˆãƒ¬ãƒ¼ãƒ‰ãŒ0ä»¶ | ã€Œãƒˆãƒ¬ãƒ¼ãƒ‰ãŒã‚ã‚Šã¾ã›ã‚“ã€ç›¸å½“ã®è¡¨ç¤º | MEDIUM |
| ãƒˆãƒ¬ãƒ¼ãƒ‰ãŒ1ä»¶ã®ã¿ | æ­£ã—ã1ä»¶åˆ†ãŒè¡¨ç¤ºã•ã‚Œã‚‹ | LOW |
| ãƒˆãƒ¬ãƒ¼ãƒ‰ãŒ100ä»¶ä»¥ä¸Š | ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œãªãè¡¨ç¤º | MEDIUM |
| å††å»ºã¦æç›ŠãŒnull | 0å††ã¨ã—ã¦æ‰±ã† | HIGH |
| æ±ºæ¸ˆãŒãªã„ãƒˆãƒ¬ãƒ¼ãƒ‰ | ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«è¡¨ç¤ºã•ã‚Œãªã„ | HIGH |
| åŒæ—¥ã«è¤‡æ•°æ±ºæ¸ˆ | åˆè¨ˆé‡‘é¡ãŒè¡¨ç¤ºã•ã‚Œã‚‹ | HIGH |

### 8-3. ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ†ã‚¹ãƒˆï¼ˆ3é …ç›®ï¼‰

| ç”»é¢ã‚µã‚¤ã‚º | æœŸå¾…çµæœ | å„ªå…ˆåº¦ |
|----------|---------|--------|
| PCï¼ˆ1920pxï¼‰ | 7åˆ—ã®ã‚°ãƒªãƒƒãƒ‰ã§è¡¨ç¤º | HIGH |
| ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆï¼ˆ768pxï¼‰ | ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºç¸®å°ã€ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆç¶­æŒ | MEDIUM |
| ã‚¹ãƒãƒ›ï¼ˆ375pxï¼‰ | æœ€å°ãƒ•ã‚©ãƒ³ãƒˆã§7åˆ—ã®ã‚°ãƒªãƒƒãƒ‰ã‚’ç¶­æŒ | MEDIUM |

---

## 9. æ³¨æ„äº‹é …ãƒ»åˆ¶ç´„

### 9-1. ãƒ‡ãƒ¼ã‚¿ã®åˆ¶ç´„

- **æ±ºæ¸ˆæ¸ˆã¿ãƒˆãƒ¬ãƒ¼ãƒ‰ã®ã¿è¡¨ç¤º**ï¼šä¿æœ‰ä¸­ã®ãƒˆãƒ¬ãƒ¼ãƒ‰ã¯å«ã¾ãªã„
- **å††å»ºã¦æç›Šã‚’ä½¿ç”¨**ï¼šPipsæç›Šã§ã¯ãªãã€å††å»ºã¦æç›Šã§é›†è¨ˆ
- **æœ€çµ‚æ±ºæ¸ˆæ—¥ã§é›†è¨ˆ**ï¼šè¤‡æ•°å›æ±ºæ¸ˆã®å ´åˆã€æœ€å¾Œã®æ±ºæ¸ˆæ—¥ã§è¡¨ç¤º

### 9-2. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

- **ãƒˆãƒ¬ãƒ¼ãƒ‰æ•°1000ä»¶ã¾ã§å¿«é©**ï¼šãã‚Œä»¥ä¸Šã¯è¦æœ€é©åŒ–
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¨ˆç®—**ï¼šLocalStorageã¸ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãªã—

### 9-3. UIåˆ¶ç´„

- **7åˆ—å›ºå®š**ï¼šæ›œæ—¥ã”ã¨ã«å›ºå®šï¼ˆæ—¥ã€œåœŸï¼‰
- **æ•°å­—è¡¨è¨˜**ï¼šã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã¯kè¡¨è¨˜ï¼ˆ-16kï¼‰ã€ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã§æ­£ç¢ºãªé‡‘é¡ï¼ˆ-16,000å††ï¼‰
- **æœ€å°ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º**ï¼šã‚¹ãƒãƒ›ã§9pxï¼ˆã“ã‚Œä»¥ä¸‹ã¯èª­ã¿ã«ãã„ï¼‰
- **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ**ï¼šPC/ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ/ã‚¹ãƒãƒ›ã§è‡ªå‹•èª¿æ•´
- **ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—è¡¨ç¤º**ï¼šæ—¥ä»˜ã‚»ãƒ«ã‚¯ãƒªãƒƒã‚¯ã§è¡¨ç¤ºã€ä»–ã®å ´æ‰€ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹

---

## 10. ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã®ä¿è¨¼

### 10-1. ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®çµ±ä¸€

**åŸå‰‡**: ã™ã¹ã¦ã®ã‚¿ãƒ–ã§`TradeManager`ã‹ã‚‰å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨

```javascript
// âœ… æ­£ã—ã„å®Ÿè£…ï¼ˆMonthlyCalendarModuleå†…ï¼‰
const tradeManager = TradeManager.getInstance();
const trades = tradeManager.getAllTrades();

trades.forEach(trade => {
    const profit = trade.yenProfitLoss?.netProfit || 0; // MODULES.mdæº–æ‹ 
});
```

### 10-2. å††å»ºã¦æç›Šã®çµ±ä¸€

**ä½¿ç”¨ã™ã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**: `trade.yenProfitLoss.netProfit`

| ã‚¿ãƒ– | ä½¿ç”¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | å‚™è€ƒ |
|------|---------------|------|
| æœˆæ¬¡ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ | `trade.yenProfitLoss.netProfit` | æ—¥æ¬¡åˆè¨ˆ |
| ãƒˆãƒ¬ãƒ¼ãƒ‰ä¸€è¦§ | `trade.yenProfitLoss.netProfit` | ã‚«ãƒ¼ãƒ‰è¡¨ç¤º |
| ãƒˆãƒ¬ãƒ¼ãƒ‰è©³ç´° | `trade.yenProfitLoss.netProfit` | ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º |
| åˆ†æã‚¿ãƒ– | `trade.yenProfitLoss.netProfit` | çµ±è¨ˆè¨ˆç®— |
| åæ”¯ç®¡ç†ã‚¿ãƒ– | `trade.yenProfitLoss.netProfit` | ã‚µãƒãƒªãƒ¼ |

### 10-3. æ—¥ä»˜åŸºæº–ã®çµ±ä¸€

**æ±ºæ¸ˆæ—¥ï¼ˆæœ€çµ‚æ±ºæ¸ˆæ—¥ï¼‰ã§é›†è¨ˆ**:
```javascript
const exitDate = trade.exits && trade.exits.length > 0
    ? trade.exits[trade.exits.length - 1].time.split('T')[0]
    : null;
```

---

## 11. å°†æ¥ã®æ‹¡å¼µæ¡ˆ

### 11-1. Phase 3ä»¥é™ã®æ‹¡å¼µæ©Ÿèƒ½

| æ©Ÿèƒ½ | èª¬æ˜ | å„ªå…ˆåº¦ |
|------|------|-------|
| **æ—¥ä»˜ã‚¯ãƒªãƒƒã‚¯ â†’ ãƒˆãƒ¬ãƒ¼ãƒ‰ä¸€è¦§** | æ—¥ä»˜ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ãã®æ—¥ã®ãƒˆãƒ¬ãƒ¼ãƒ‰ä¸€è¦§ã‚’ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º | MEDIUM |
| **é€šè²¨ãƒšã‚¢åˆ¥ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼** | ç‰¹å®šã®é€šè²¨ãƒšã‚¢ã®ã¿ã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤º | LOW |
| **Pipsè¡¨ç¤º / å††å»ºã¦è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ** | ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®è¡¨ç¤ºã‚’Pipsã¨å††å»ºã¦ã§åˆ‡ã‚Šæ›¿ãˆ | LOW |
| **é€±æ¬¡ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼** | é€±å˜ä½ã§ã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤º | LOW |
| **ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ** | ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’ç”»åƒã‚„PDFã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ | LOW |

---

## 12. æ‰¿èªãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼

### 12-1. æ‰¿èªè€…

| å½¹å‰² | æ‹…å½“è€… | æ‰¿èªæ—¥ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|------|-------|-------|----------|
| é–‹ç™ºè€… | ã‚³ãƒ³ãƒ‘ãƒŠ | 2025-11-14 | âœ… æ‰¿èª |
| ãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼ | Claudeï¼ˆAIï¼‰ | 2025-11-15 | âœ… æ‰¿èªï¼ˆv2.0ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ç‰ˆï¼‰ |

### 12-2. å¤‰æ›´å±¥æ­´

| ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | æ—¥ä»˜ | å¤‰æ›´å†…å®¹ | æ‹…å½“è€… |
|----------|------|---------|--------|
| v1.0 | 2025-11-14 | åˆç‰ˆä½œæˆ | ã‚³ãƒ³ãƒ‘ãƒŠ |
| v1.5 | 2025-11-15 | UIè¨­è¨ˆä¿®æ­£ãƒ»ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—è©³ç´°åŒ– | ã‚³ãƒ³ãƒ‘ãƒŠ |
| v2.0 | 2025-11-15 | ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–å¯¾å¿œç‰ˆãƒ»MODULES.mdå®Œå…¨æº–æ‹  | ã‚³ãƒ³ãƒ‘ãƒŠ |

---

## 13. å‚è€ƒè³‡æ–™

### 13-1. ãƒ‡ã‚¶ã‚¤ãƒ³å‚è€ƒ

- ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ç”»åƒï¼šã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼å½¢å¼ã®æç›Šè¡¨ç¤ºUI
- æ—¢å­˜ã®åæ”¯ç®¡ç†ã‚¿ãƒ–UI

### 13-2. é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- `OVERVIEW.md` - Trading Completeå…¨ä½“æ§‹é€ 
- `MODULES.md` - ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æŠ€è¡“ä»•æ§˜ï¼ˆå¿…èª­ï¼‰
- `REFERENCE.md` - ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ãƒ»å®Œäº†å±¥æ­´
- `æ©Ÿèƒ½ä¸€è¦§.md` - æ—¢å­˜æ©Ÿèƒ½ã®è§£èª¬

---

*è¦ä»¶å®šç¾©æ›¸ v2.0 å®Œæˆ - ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–å®Ÿè£…æº–å‚™å®Œäº† ğŸ‰*
