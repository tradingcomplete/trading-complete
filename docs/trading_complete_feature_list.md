# 機能一覧.md - Trading Complete 解説用
*最終更新: 2025-12-18*

## 📖 このドキュメントの目的
システム解説・マニュアル作成時の参照用。各画面の機能を分かりやすくまとめています。

---

## 🚀 システム概要

### コンセプト
**「すべてのトレードを、この一つで」**

FXトレーダーのための包括的なトレード管理システム。記録・分析・収支管理をワンストップで提供。

### アクセス
- 🌐 **公開URL**: https://tradingcomplete.com
- 📱 **対応デバイス**: PC / タブレット / スマホ（レスポンシブ対応）
- 🎨 **テーマ**: ダークモード / ライトモード切替可能

### 6タブ構成（32機能）

| タブ | 機能数 | 主な役割 |
|-----|-------|---------|
| 📝 新規エントリー | 6 | トレード開始時の記録 |
| 📄 トレード記録 | 7 | 過去トレードの管理 |
| 📓 相場ノート | 6 | 日々の相場メモ・検索・月メモ |
| 📊 分析 | 4 | 統計・レポート・振り返り |
| 💰 収支管理 | 4 | カレンダー・入出金・経費・CSV |
| ⚙️ 設定 | 5 | ブローカー・通貨ペア・データ管理 |

**合計: 32機能**

---

## 📝 タブ1: 新規エントリー（6機能）

### 画面構成
```
┌─────────────────────────────────────┐
│ クイック統計（4つの数値）            │
├─────────────────────────────────────┤
│ 基本情報入力     │ チェックリスト    │
│ - ブローカー選択  │ - 理由1          │
│ - 通貨ペア       │ - 理由2          │
│ - 売買方向       │ - 理由3          │
│ - 日時          │ - シナリオ        │
│ - 価格          │ - 感情記録        │
│ - ロット        │                   │
├─────────────────────────────────────┤
│ お気に入り通貨ペア（ワンクリック）    │
│ [USD/JPY] [EUR/USD] [GBP/JPY] ...   │
├─────────────────────────────────────┤
│ 画像アップロード（3枚）              │
│ [チャート1] [チャート2] [チャート3]  │
├─────────────────────────────────────┤
│ [保存] [クリア]                     │
└─────────────────────────────────────┘
```

### 機能詳細

#### 1. エントリー記録
| 項目 | 必須 | 説明 |
|------|-----|------|
| ブローカー | ⚪ | 登録済みブローカーをプルダウン選択 |
| 通貨ペア/商品 | ✅ | 取引対象（お気に入りからワンクリック入力可） |
| 売買方向 | ✅ | ロング/ショート |
| エントリー日時 | ✅ | 取引開始時刻 |
| エントリー価格 | ✅ | 開始価格 |
| ロットサイズ | ✅ | 取引量（ブローカー選択時にロット単位表示） |
| 損切り価格 | ⚪ | ストップロス |
| 利確目標価格 | ⚪ | テイクプロフィット |

#### 2. チェックリスト（3つ必須）
- **理由1〜3**: エントリーの根拠を明確化
- **進捗表示**: "チェックリスト: 2/3" のように表示
- **目的**: 感覚トレードの防止、ルール遵守の確認

#### 3. 画像保存（3枚）
| 種類 | 用途 |
|------|------|
| チャート画像1 | エントリー時のメインチャート |
| チャート画像2 | 別時間軸や拡大図 |
| チャート画像3 | 追加のチャート画像 |

#### 4. クイック統計（自動計算）
| 項目 | 説明 |
|------|------|
| 今月のPips | 今月獲得したPips合計 |
| 今月の勝敗 | "3勝2敗" 形式 |
| 勝率 | 勝ち ÷ 全体 × 100 |
| 平均R:R | リスクリワード比率平均 |

#### 5. ブローカー選択
- 設定タブで登録したブローカーをプルダウン表示
- 選択時にロット単位（1ロット = ○通貨）を自動表示
- デフォルトロットを自動入力

#### 6. お気に入り通貨ペア
- 設定タブで登録した通貨ペアをボタン表示
- ワンクリックで通貨ペア入力欄に反映
- 最大10個まで登録可能

---

## 📄 タブ2: トレード記録（7機能）

### 画面構成
```
┌─────────────────────────────────────┐
│ フィルター                          │
│ [年月] [通貨ペア] [方向] [ステータス] │
├─────────────────────────────────────┤
│ トレードカード一覧                   │
│ ┌─────────────────────────────────┐ │
│ │ 📈 USD/JPY  [ロング]            │ │
│ │ 2025-11-29 10:30               │ │
│ │ +50.0 pips | +15,000円         │ │
│ │ [詳細] [決済] [編集] [削除]     │ │
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```

### 機能詳細

#### 1. 一覧表示
- トレードカード形式で視覚的に表示
- 通貨ペア・方向・Pips・円建て損益を一目で確認
- 保有中/決済済みをバッジで区別

#### 2. フィルター機能
| フィルター | 選択肢 |
|-----------|--------|
| 年月 | 任意の年月 |
| 通貨ペア | 登録済みペア |
| 売買方向 | ロング/ショート/全て |
| ステータス | 保有中/決済済み/全て |

#### 3. 決済処理
- 決済価格入力
- 決済日時入力（自動で現在時刻）
- 実際のPips計算
- 振り返り入力（うまくいった点/改善点）

#### 4. 編集機能
- 全項目の編集が可能
- 画像の追加・削除
- 保存後は一覧に即反映

#### 5. 削除機能
- 確認ダイアログ表示
- 削除後は一覧から即削除

#### 6. 円建て損益管理
| 項目 | 説明 |
|------|------|
| 円建て損益 | 実際の損益金額 |
| 手数料 | 取引手数料 |
| スワップ | スワップポイント |
| 為替レート | 決済時のレート |
| 純損益 | 自動計算（損益 - 手数料 + スワップ） |

#### 7. 画像表示機能
- トレード詳細モーダルで画像をクリック → 拡大表示
- 相場ノートでも同じ挙動で統一
- スムーズなズーム効果
- ESCキー / 背景クリックで閉じる

---

## 📓 タブ3: 相場ノート（6機能）

### 画面構成
```
┌─────────────────────────────────────┐
│ [🔍 検索]                           │
├─────────────────────────────────────┤
│ 📅 11月のアノマリー [▼]             │
│ ┌─────────────────────────────────┐ │
│ │ ・月末リバランス注意            │ │
│ │ ・感謝祭（第4木曜）流動性低下   │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│ 📝 2025年11月のメモ [▼]            │
│ ┌─────────────────────────────────┐ │
│ │ ・FOMCに注意                    │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│ 週間プレビュー（7日分）              │
│ [月] [火] [水] [木] [金] [土] [日]   │
├─────────────────────────────────────┤
│ ノート詳細表示                      │
│ - 本日の相場メモ                    │
│ - 気づき・学び                      │
│ - 画像添付                          │
├─────────────────────────────────────┤
│ カレンダー（月間）                   │
└─────────────────────────────────────┘
```

### 機能詳細

#### 1. ノート記入
- 日付選択
- リッチテキスト入力（見出し、太字、リスト対応）
- 画像添付機能
- 保存ボタン

#### 2. 週間プレビュー
- 1週間分の日付を横並び表示
- 各日のノート有無を視覚的に確認
- クリックでその日のノート詳細表示

#### 3. カレンダー表示
- 月間カレンダー
- ノート記入済み日付にマーク表示
- クリックで該当日のノート表示
- 週間プレビューと連動

#### 4. キーワード検索
- 🔍ボタンでモーダル表示
- メモ・相場観を横断検索
- キーワードハイライト表示
- 結果クリックでその日にジャンプ

#### 5. 月メモ（アノマリー）
- 月ごとの毎年共通の季節性情報
- 例: 「11月は感謝祭で流動性低下」
- 折りたたみ可能

#### 6. 月次メモ
- 特定年月の個別メモ
- 例: 「2025年11月はFOMC注意」
- 折りたたみ可能
- 年月ごとに独立管理

---

## 📊 タブ4: 分析（4機能）

### 画面構成
```
┌─────────────────────────────────────┐
│ 統計サマリー（6項目 × 2表示）        │
│ [Pips統計] / [円建て統計]           │
├─────────────────────────────────────┤
│ レポート生成                        │
│ [月次] [四半期] [年次] [週次]       │
├─────────────────────────────────────┤
│ レポート詳細表示                    │
│ - トップトレード                    │
│ - ワーストトレード                  │
│ - 振り返り                          │
│ - ベストプラクティス                │
├─────────────────────────────────────┤
│ チャート表示                        │
│ - 月別パフォーマンス                │
│ - 累積損益                          │
│ - 全期間サマリー                    │
└─────────────────────────────────────┘
```

### 機能詳細

#### 1. 統計表示（Pips / 円建て切替）

**Pips統計**:
| 項目 | 説明 |
|------|------|
| 総トレード数 | 全トレード件数 |
| 勝ち/負け | 勝敗の内訳 |
| 勝率 | 勝ち ÷ 全体 |
| 平均獲得Pips | 1トレードあたりの平均 |
| 最大ドローダウン | 最大連続損失Pips |
| プロフィットファクター | 総利益 ÷ 総損失 |

**円建て統計**:
| 項目 | 説明 |
|------|------|
| 総損益（円） | 円建ての合計損益 |
| 平均損益（円） | 1トレードあたり |
| 勝ちトレード平均 | 勝ちトレードの平均額 |
| 負けトレード平均 | 負けトレードの平均額 |
| 最大利益/最大損失 | 単発の最大値 |
| 純利益 | 手数料・スワップ含む |

**切替機能**:
- ワンクリックで Pips ⇄ 円建て 切替
- 統計値は自動再計算

#### 2. レポート生成
- **月次レポート**: 指定月のサマリー
- **四半期レポート**: 3ヶ月分の集計
- **年次レポート**: 1年分の総括
- **週次レポート**: 週別の分析

#### 3. レポート詳細
- トップトレード5件
- ワーストトレード5件
- 振り返りリスト
- ベストプラクティス抽出

#### 4. チャート表示
- 月別パフォーマンスチャート（棒グラフ）
- 累積損益チャート（折れ線グラフ）
- 全期間サマリー（統計カード）

---

## 💰 タブ5: 収支管理（4機能）

### 画面構成
```
┌─────────────────────────────────────┐
│ カレンダー（月間）                   │
│ - 日別損益の視覚化                  │
│ - 色分け表示（プラス/マイナス）      │
├─────────────────────────────────────┤
│ 入出金管理                          │
│ - 投入資金合計                      │
│ - 利益率表示                        │
│ - 入出金履歴テーブル                │
├─────────────────────────────────────┤
│ 経費管理                            │
│ - カテゴリ別アコーディオン表示      │
│ - 経費サマリー（リアルタイム更新）  │
├─────────────────────────────────────┤
│ 締め処理・CSV出力                   │
│ - 月次/四半期/年次締め              │
│ - 各種CSV出力                       │
└─────────────────────────────────────┘
```

### 機能詳細

#### 1. カレンダー表示（日別損益）
- 月間カレンダー形式
- 日別の損益を色分け表示
  - プラス: 緑色
  - マイナス: 赤色
  - ゼロ: グレー
- クリックで該当日のトレード詳細表示

#### 2. 入出金管理
| 項目 | 説明 |
|------|------|
| 入金記録 | 追加入金を記録 |
| 出金記録 | 出金を記録 |
| 投入資金 | 現在の投入資金合計 |
| 利益率 | （総損益 ÷ 投入資金）× 100 |
| 履歴一覧 | 入出金履歴をテーブル表示 |

#### 3. 経費管理
- 経費の登録（日付/金額/カテゴリ/メモ）
- カテゴリ例：通信費、書籍代、セミナー費、ツール代
- カテゴリ別アコーディオン表示
- 経費サマリーの自動更新
- 編集・削除機能

#### 4. 締め処理・CSV出力

**締め処理**:
| 種類 | 説明 |
|------|------|
| 月次締め | 指定月のトレード確定 |
| 四半期締め | 3ヶ月分まとめて確定 |
| 年次締め | 1年分まとめて確定 |

締め後は編集不可（データ整合性保持）

**CSV出力**:
| 出力種類 | 内容 |
|---------|------|
| 月別CSV | トレード+経費 |
| 年次トレードCSV | 1年分のトレード |
| 年次経費CSV | 1年分の経費 |
| 年間収支サマリー | 総合レポート |

※BOM付きUTF-8（Excel対応）

---

## ⚙️ タブ6: 設定（5機能）

### 画面構成
```
┌─────────────────────────────────────┐
│ ⚙️ 設定                             │
├─────────────────────────────────────┤
│ [基本] [トレーディング] [データ]     │
├─────────────────────────────────────┤
│                                     │
│ 【選択されたサブタブの内容】         │
│                                     │
└─────────────────────────────────────┘
```

### 機能詳細

#### 1. 目標設定（セルフイメージ）
- 目標1〜3の設定
- 達成/未達成の切り替え
- ヘッダーに常時表示

#### 2. テーマ切り替え
- ダークモード（デフォルト）
- ライトモード
- ワンクリック切り替え

#### 3. ブローカー管理
```
┌─────────────────────────────────────┐
│ 🏢 ブローカー管理                    │
├─────────────────────────────────────┤
│ ┌─────────────────────────────────┐ │
│ │ XM Trading                     │ │
│ │ 1ロット = 100,000通貨          │ │
│ │ [編集] [削除]                  │ │
│ └─────────────────────────────────┘ │
│ [+ ブローカーを追加]                │
└─────────────────────────────────────┘
```
- 25社のプリセットブローカー
- カスタムブローカー追加
- ロット単位設定（1,000〜100,000通貨）
- 編集・削除機能

#### 4. お気に入り通貨ペア管理
```
┌─────────────────────────────────────┐
│ ⭐ お気に入り通貨ペア（5/10）        │
├─────────────────────────────────────┤
│ [USD/JPY ×] [EUR/USD ×] [GBP/JPY ×] │
│ [EUR/JPY ×] [AUD/USD ×]             │
├─────────────────────────────────────┤
│ [+ 通貨ペアを追加]                  │
│ ┌─────────────────────────────────┐ │
│ │ 🔍 検索: [________]             │ │
│ │ [メジャー][クロス円][資源国]... │ │
│ │ USD/JPY  EUR/USD  GBP/USD ...  │ │
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```
- 53通貨ペアのプリセット
- 検索バー（リアルタイム検索）
- カテゴリフィルター（6種類）
- 最大10個まで登録
- 新規エントリーでワンクリック入力

#### 5. データ管理（v7.0）
| 機能 | 説明 |
|------|------|
| エクスポート | 全データ+設定を統合JSON出力 |
| インポート | JSONファイルから完全復元（選択式） |
| データ削除 | 全データを削除（確認ダイアログ） |
| ストレージ状況 | 使用量の確認 |

**エクスポート対象**:
- トレード記録
- 相場ノート
- 経費データ
- 入出金履歴
- ブローカー設定
- お気に入り通貨ペア
- セルフイメージ（目標）

**インポート機能**:
- 既存データ保護オプション
- 個別選択インポート可能

---

## 🎨 共通UI要素

### カラーパレット
- **紫系**: 特別機能
- **緑系**: 標準機能（保存、実行、プラス損益）
- **青系**: 情報表示（統計、レポート）
- **赤系**: 警告・削除・マイナス損益

### レスポンシブ対応
- **PC**: 2カラムレイアウト
- **タブレット**: 1カラムレイアウト、統計3列表示
- **スマホ**: フル幅表示、タブ2×3グリッド、1カラム化
- **対応範囲**: 全6タブ + 全モーダル

**主な特徴**:
- ヘッダー: ロゴ60px、セルフイメージ非表示（スマホ）
- タブナビ: 2×3グリッド表示
- 新規エントリー: 2カラム→1カラム、画像横スクロール
- 相場ノート: 週間プレビューアコーディオン
- 分析タブ: 統計6列→3列→2列
- モーダル: 幅95%

### テーマ切り替え
- **ダークモード**: 目に優しい暗色系（デフォルト）
- **ライトモード**: 明るい環境向け白色系
- **対応範囲**: 全6タブ + 全モーダル + 全UI要素
- **切り替え**: 設定タブでワンクリック

---

## 🔧 技術的な特徴

### データ保存
- LocalStorage使用
- 主要キー: `trades`, `notes`, `expenses`, `tc_closed_periods`, `brokers`, `favoritePairs`, `depositWithdrawals`
- JSON形式で保存

### イベント駆動
- EventBusによるモジュール間通信
- 疎結合な設計

### モジュール構成

| Part | 名称 | 状態 | ファイル数 |
|------|------|------|-----------|
| Part 1 | 基盤・初期化 | ⚠️30%（EventBus完了） | script.js内 + EventBus.js |
| Part 2 | トレード記録 | ✅100%完成 | 10ファイル |
| Part 3 | 相場ノート | ✅100%完成 | 1ファイル（NoteManagerModule.js） |
| Part 5 | 設定タブ | ✅100%完成 | 6ファイル |
| Part 7 | 収支管理 | ✅100%完成 | 6ファイル |
| Part 8 | 統計・レポート | ✅100%完成 | 3ファイル |

---

## 📚 関連ドキュメント

| ドキュメント | 役割 |
|-------------|------|
| **OVERVIEW.md** | システム全体構造・リリース計画 |
| **MODULES.md** | 技術仕様書 |
| **TASKS.md** | 開発タスクリスト・完了履歴 |
| **REFERENCE.md** | 完了詳細・教訓・ベストプラクティス |
| **docs/フォーム制御.md** | フォーム関連の制御構造・エラー対処 |

---

*このドキュメントは解説・マニュアル作成用です。開発時はMODULES.mdを参照してください。*